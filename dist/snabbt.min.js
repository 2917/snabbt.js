/*! snabbt.js 2014-07-24 */
function requestAnimFrame(a){tick_requests.push(a)}function master_tick(a){for(var b=tick_requests.length,c=0;b>c;++c)tick_requests[c](a);tick_requests.splice(0,b),window.requestAnimationFrame(master_tick)}function pos_from_options(a,b,c){return b[c+"pos"]&&(a.x=b[c+"pos"][0],a.y=b[c+"pos"][1],a.z=b[c+"pos"][2]),b[c+"rot"]&&(a.ax=b[c+"rot"][0],a.ay=b[c+"rot"][1],a.az=b[c+"rot"][2]),b[c+"rot_post"]&&(a.bx=b[c+"rot_post"][0],a.by=b[c+"rot_post"][1],a.bz=b[c+"rot_post"][2]),b[c+"scale"]&&(a.sx=b[c+"scale"][0],a.sy=b[c+"scale"][1]),b[c+"width"]&&(a.width=b[c+"width"]),b[c+"height"]&&(a.height=b[c+"height"]),a}function snabbt(a,b){function c(i){g.tick(i);var j=g.current_transform();if(snabbtjs.set_css_transform(a,j),g.completed()){var k=g.end_position();snabbtjs.set_css_transform(a,k),b.loop>1?(b.loop-=1,g.assign(f),requestAnimFrame(c)):(b.callback&&b.callback(),h.length&&(b=h.pop(),d=pos_from_options(e,b,"from_"),e=pos_from_options(new snabbtjs.Position({}),b,""),g.assign({start_pos:d,end_pos:e,duration:b.duration||1e3,delay:b.delay||0,offset:b.offset}),b.easing&&(g.easing=snabbtjs.EASING_FUNCS[b.easing]),g.tick(i),requestAnimFrame(c)))}else requestAnimFrame(c)}var d=new snabbtjs.Position({});d=pos_from_options(d,b,"from_");var e=new snabbtjs.Position({});e=pos_from_options(e,b,"");var f={start_pos:d,end_pos:e,duration:b.duration||1e3,delay:b.delay||0,offset:b.offset};b.easing&&(f.easing=snabbtjs.EASING_FUNCS[b.easing]);var g=new snabbtjs.Animation(f),h=[],i={then:function(a){return h.unshift(a),i}};return requestAnimFrame(c),i}var snabbtjs=snabbtjs||{};snabbtjs.Animation=function(a){this.assign(a)},snabbtjs.Animation.prototype.assign=function(a){this.start_pos=a.start_pos||new snabbtjs.Position({}),this.end_pos=a.end_pos||new snabbtjs.Position({}),this.offset=a.offset,this.duration=a.duration||500,this.delay=a.delay||0,this.easing=a.easing||snabbtjs.linear_easing,this.start_time=0,this.current_time=0,this.current_position=new snabbtjs.Position({}),a.offset&&(this.current_position.offset_x=this.offset[0],this.current_position.offset_y=this.offset[1],this.current_position.offset_z=this.offset[2],this.end_pos.offset_x=this.offset[0],this.end_pos.offset_y=this.offset[1],this.end_pos.offset_z=this.offset[2])},snabbtjs.Animation.prototype.tick=function(a){this.start_time||(this.start_time=a),a-this.start_time>this.delay&&(this.current_time=a-this.delay)},snabbtjs.Animation.prototype.current_transform=function(){return this.update_current_transition(),this.current_position},snabbtjs.Animation.prototype.completed=function(){return 0===this.start_time?!1:this.current_time-this.start_time>this.duration},snabbtjs.Animation.prototype.end_position=function(){return this.end_pos},snabbtjs.Animation.prototype.update_current_transition=function(){var a=Math.min(Math.max(.001,this.current_time-this.start_time),this.duration),b=this.duration,c=this.end_pos.x-this.start_pos.x,d=this.end_pos.y-this.start_pos.y,e=this.end_pos.z-this.start_pos.z,f=this.end_pos.ax-this.start_pos.ax,g=this.end_pos.ay-this.start_pos.ay,h=this.end_pos.az-this.start_pos.az,i=this.end_pos.bx-this.start_pos.bx,j=this.end_pos.by-this.start_pos.by,k=this.end_pos.bz-this.start_pos.bz,l=this.end_pos.sx-this.start_pos.sx,m=this.end_pos.sy-this.start_pos.sy,n=this.end_pos.width-this.start_pos.width,o=this.end_pos.height-this.start_pos.height,p=this.easing(a,b);this.current_position.ax=this.start_pos.ax+p*f,this.current_position.ay=this.start_pos.ay+p*g,this.current_position.az=this.start_pos.az+p*h,this.current_position.x=this.start_pos.x+p*c,this.current_position.y=this.start_pos.y+p*d,this.current_position.z=this.start_pos.z+p*e,this.current_position.bx=this.start_pos.bx+p*i,this.current_position.by=this.start_pos.by+p*j,this.current_position.bz=this.start_pos.bz+p*k,this.current_position.sx=this.start_pos.sx+p*l,this.current_position.sy=this.start_pos.sy+p*m,this.end_pos.width&&(this.current_position.width=this.start_pos.width+p*n),this.end_pos.height&&(this.current_position.height=this.start_pos.height+p*o)};var snabbtjs=snabbtjs||{};snabbtjs.pow2_easing=function(a,b){var c=a/b;return c*c},snabbtjs.linear_easing=function(a,b){return a/b},snabbtjs.cos_easing=function(a,b){return(Math.cos(a/b*Math.PI+Math.PI)+1)/2},snabbtjs.create_cubic_bezier_easing=function(a,b,c,d){return function(e,f){var g=e/f;return 3*Math.pow(1-g,2)*g*(a+b)+3*(1-g)*Math.pow(g,2)*(c+d)+Math.pow(g,3)}},snabbtjs.cubic_easing=function(a,b){var c=a/b;return(Math.pow(2*c-1,3)+1)/2},snabbtjs.sqrt_easing=function(a,b){var c=a/b;return Math.pow(c,.5)},snabbtjs.cos_wooble_easing=function(a,b){var c=a/b;return c*Math.cos(4*Math.PI*c)},snabbtjs.atan_easing=function(a,b){var c=a/b;return(Math.atan(Math.PI*c-Math.PI/2)+1)/2},snabbtjs.sinc_wobbler_easing=function(a,b){var c=a/b,d=5;return(-Math.sin(d*Math.PI*c)/(d*c)+Math.PI)/Math.PI},snabbtjs.sinc2_wobbler_easing=function(a,b){var c=a/b,d=4*Math.PI*Math.pow(c,2);return 1-Math.sin(d)/d},snabbtjs.sinc2=function(a,b){var c=a/b;return 1-Math.sin(20*Math.PI*c)/(20*Math.PI*c)},snabbtjs.superman_easing=function(a,b){var c=a/b,d=10*Math.PI*(c-.5);return c+.1*(Math.sin(d)/d)},snabbtjs.sinc=function(a,b){var c=a/b,d=20*Math.PI*c;return Math.sin(d)/d},snabbtjs.EASING_FUNCS={linear:snabbtjs.linear_easing,cubic:snabbtjs.cubic_easing,square:snabbtjs.pow2_easing,sqrt:snabbtjs.sqrt_easing,atan:snabbtjs.atan_easing,cos:snabbtjs.cos_easing,sinc_wobbler:snabbtjs.sinc_wobbler_easing,sinc2_wobbler:snabbtjs.sinc2_wobbler_easing,superman:snabbtjs.superman_easing,sinc:snabbtjs.sinc};var tick_requests=[];window.requestAnimationFrame(master_tick);var snabbtjs=snabbtjs||{};snabbtjs.assigned_matrix_multiplication=function(a,b,c){return c[0]=a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],c[1]=a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],c[2]=a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],c[3]=a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],c[4]=a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],c[5]=a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],c[6]=a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],c[7]=a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],c[8]=a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],c[9]=a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],c[10]=a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],c[11]=a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],c[12]=a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],c[13]=a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],c[14]=a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],c[15]=a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15],c},snabbtjs.mat_to_css=function(a){var b="matrix3d("+a[0].toFixed(10)+", "+a[1].toFixed(10)+", "+a[2].toFixed(10)+", "+a[3].toFixed(10)+", "+a[4].toFixed(10)+", "+a[5].toFixed(10)+", "+a[6].toFixed(10)+", "+a[7].toFixed(10)+", "+a[8].toFixed(10)+", "+a[9].toFixed(10)+", "+a[10].toFixed(10)+", "+a[11].toFixed(10)+", "+a[12].toFixed(10)+", "+a[13].toFixed(10)+", "+a[14].toFixed(10)+", "+a[15].toFixed(10)+")";return b},snabbtjs.mult=function(a,b){var c=new Float32Array(16);return snabbtjs.assigned_matrix_multiplication(a,b,c),c},snabbtjs.rotX=function(a){var b=new Float32Array(16);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Math.cos(a),b[6]=-Math.sin(a),b[7]=0,b[8]=0,b[9]=Math.sin(a),b[10]=Math.cos(a),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},snabbtjs.assign_rotX=function(a,b){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=Math.cos(b),a[6]=-Math.sin(b),a[7]=0,a[8]=0,a[9]=Math.sin(b),a[10]=Math.cos(b),a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},snabbtjs.rotY=function(a){var b=new Float32Array(16);return b[0]=Math.cos(a),b[1]=0,b[2]=Math.sin(a),b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=-Math.sin(a),b[9]=0,b[10]=Math.cos(a),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},snabbtjs.assign_rotY=function(a,b){return a[0]=Math.cos(b),a[1]=0,a[2]=Math.sin(b),a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=-Math.sin(b),a[9]=0,a[10]=Math.cos(b),a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},snabbtjs.rotZ=function(a){var b=new Float32Array(16);return b[0]=Math.cos(a),b[1]=-Math.sin(a),b[2]=0,b[3]=0,b[4]=Math.sin(a),b[5]=Math.cos(a),b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},snabbtjs.assign_rotZ=function(a,b){return a[0]=Math.cos(b),a[1]=-Math.sin(b),a[2]=0,a[3]=0,a[4]=Math.sin(b),a[5]=Math.cos(b),a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},snabbtjs.trans=function(a,b,c){var d=new Float32Array(16);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=a,d[13]=b,d[14]=c,d[15]=1,d},snabbtjs.assign_trans=function(a,b,c,d){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=b,a[13]=c,a[14]=d,a[15]=1,a},snabbtjs.scale=function(a,b){return new Float32Array([a,0,0,0,0,b,0,0,0,0,1,0,0,0,0,1])},snabbtjs.assign_scale=function(a,b,c){return a[0]=b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=c,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},snabbtjs.ident=function(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},snabbtjs.assign_ident=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},snabbtjs.set_css_transform=function(a,b){var c=b.as_matrix();if(a.hasOwnProperty("length"))for(var d=0;d<a.length;++d)a[d].style.webkitTransform=snabbtjs.mat_to_css(c),a[d].style.MozTransform=snabbtjs.mat_to_css(c),b.width&&(a[d].style.width=b.width+"px"),b.height&&(a[d].style.height=b.height+"px");else a.style.webkitTransform=snabbtjs.mat_to_css(c),a.style.MozTransform=snabbtjs.mat_to_css(c),b.width&&(a.style.width=b.width+"px"),b.height&&(a.style.height=b.height+"px")},snabbtjs.Position=function(a){this.ax=a.ax||0,this.ay=a.ay||0,this.az=a.az||0,this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.bx=a.bx||0,this.by=a.by||0,this.bz=a.bz||0,this.offset_x=a.offset_x||0,this.offset_y=a.offset_y||0,this.offset_z=a.offset_z||0,this.sx=a.sx||1,this.sy=a.sy||1,this.width=a.width,this.height=a.height},snabbtjs.Position.prototype.clone=function(){var a=new snabbtjs.Position({ax:this.ax,ay:this.ay,az:this.az,x:this.x,y:this.y,z:this.z,bx:this.bx,by:this.by,bz:this.bz,sx:this.sx,sy:this.sy});return a};var temp_m=snabbtjs.ident(),temp_res1=snabbtjs.ident(),temp_res2=snabbtjs.ident();snabbtjs.Position.prototype.as_matrix=function(){return snabbtjs.assign_scale(temp_res1,this.sx,this.sy),snabbtjs.assign_rotX(temp_res2,this.ax),snabbtjs.assigned_matrix_multiplication(temp_res1,temp_res2,temp_m),snabbtjs.assign_rotY(temp_res1,this.ay),snabbtjs.assigned_matrix_multiplication(temp_res1,temp_m,temp_res2),snabbtjs.assign_rotZ(temp_m,this.az),snabbtjs.assigned_matrix_multiplication(temp_m,temp_res2,temp_res1),snabbtjs.assigned_matrix_multiplication(temp_res1,snabbtjs.assign_trans(temp_m,this.x,this.y,this.z),temp_res2),snabbtjs.assigned_matrix_multiplication(temp_res2,snabbtjs.assign_rotX(temp_m,this.bx),temp_res1),snabbtjs.assigned_matrix_multiplication(temp_res1,snabbtjs.assign_rotY(temp_m,this.by),temp_res2),snabbtjs.assigned_matrix_multiplication(temp_res2,snabbtjs.assign_rotZ(temp_m,this.bz),temp_res1),snabbtjs.assign_trans(temp_m,this.offset_x,this.offset_y,this.offset_z),snabbtjs.assigned_matrix_multiplication(temp_m,temp_res1,temp_res2),temp_res2};