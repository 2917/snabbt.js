/*! snabbt.js 2014-05-29 */
function requestAnimFrame(a){tick_requests.push(a)}function master_tick(a){for(var b=tick_requests.length,c=0;b>c;++c)tick_requests[c](a);tick_requests.splice(0,b),window.requestAnimationFrame(master_tick)}function pos_from_options(a,b,c){return b[c+"pos"]&&(a.x=b[c+"pos"][0],a.y=b[c+"pos"][1],a.z=b[c+"pos"][2]),b[c+"rot"]&&(a.ax=b[c+"rot"][0],a.ay=b[c+"rot"][1],a.az=b[c+"rot"][2]),b[c+"rot_post"]&&(a.bx=b[c+"rot_post"][0],a.by=b[c+"rot_post"][1],a.bz=b[c+"rot_post"][2]),a}function snabbt(a,b){function c(i){g.tick(i);var j=g.current_transform();if(snabbtjs.set_css_transform(a,j.as_matrix()),g.completed()){var k=g.end_position();snabbtjs.set_css_transform(a,k.as_matrix()),b.loop>1?(b.loop-=1,g=new snabbtjs.Animation(f),requestAnimFrame(c)):(b.callback&&b.callback(),h.length&&(b=h.pop(),d=pos_from_options(e,b,"from_"),e=pos_from_options(new snabbtjs.Position({}),b,""),g=new snabbtjs.Animation({start_pos:d,end_pos:e,duration:b.duration||1e3,delay:b.delay||0,offset:b.offset}),b.easing&&(g.easing=snabbtjs.EASING_FUNCS[b.easing]),requestAnimFrame(c)))}else requestAnimFrame(c)}var d=new snabbtjs.Position({});d=pos_from_options(d,b,"from_");var e=new snabbtjs.Position({});e=pos_from_options(e,b,"");var f={start_pos:d,end_pos:e,duration:b.duration||1e3,delay:b.delay||0,offset:b.offset};b.easing&&(f.easing=snabbtjs.EASING_FUNCS[b.easing]);var g=new snabbtjs.Animation(f),h=[],i={then:function(a){return h.unshift(a),i}};return requestAnimFrame(c),i}var snabbtjs=snabbtjs||{};snabbtjs.Animation=function(a){this.start_pos=a.start_pos||new snabbtjs.Position({}),this.end_pos=a.end_pos||new snabbtjs.Position({}),this.offset=a.offset,this.duration=a.duration||500,this.delay=a.delay||0,this.easing=a.easing||snabbtjs.linear_easing,this.start_time=0,this.current_time=0,this.current_position=new snabbtjs.Position({}),this.offset&&(this.current_position.offset_x=this.offset[0],this.current_position.offset_y=this.offset[1],this.current_position.offset_z=this.offset[2],this.end_pos.offset_x=this.offset[0],this.end_pos.offset_y=this.offset[1],this.end_pos.offset_z=this.offset[2])},snabbtjs.Animation.prototype.tick=function(a){this.start_time||(this.start_time=a),a-this.start_time>this.delay&&(this.current_time=a-this.delay)},snabbtjs.Animation.prototype.current_transform=function(){return this.update_current_transition(),this.current_position},snabbtjs.Animation.prototype.completed=function(){return 0===this.start_time?!1:this.current_time-this.start_time>this.duration},snabbtjs.Animation.prototype.end_position=function(){return this.end_pos},snabbtjs.Animation.prototype.update_current_transition=function(){var a=Math.min(Math.max(.001,this.current_time-this.start_time),this.duration),b=this.duration,c=this.end_pos.x-this.start_pos.x,d=this.end_pos.y-this.start_pos.y,e=this.end_pos.z-this.start_pos.z,f=this.end_pos.ax-this.start_pos.ax,g=this.end_pos.ay-this.start_pos.ay,h=this.end_pos.az-this.start_pos.az,i=this.end_pos.bx-this.start_pos.bx,j=this.end_pos.by-this.start_pos.by,k=this.end_pos.bz-this.start_pos.bz,l=this.easing(a,b);this.current_position.ax=this.start_pos.ax+l*f,this.current_position.ay=this.start_pos.ay+l*g,this.current_position.az=this.start_pos.az+l*h,this.current_position.x=this.start_pos.x+l*c,this.current_position.y=this.start_pos.y+l*d,this.current_position.z=this.start_pos.z+l*e,this.current_position.bx=this.start_pos.bx+l*i,this.current_position.by=this.start_pos.by+l*j,this.current_position.bz=this.start_pos.bz+l*k};var snabbtjs=snabbtjs||{};snabbtjs.pow2_easing=function(a,b){return Math.pow(a/b,.5)},snabbtjs.linear_easing=function(a,b){return a/b},snabbtjs.cos_easing=function(a,b){return(Math.cos(a/b*Math.PI+Math.PI)+1)/2},snabbtjs.create_cubic_bezier_easing=function(a,b,c,d){return function(e,f){var g=e/f;return 3*Math.pow(1-g,2)*g*(a+b)+3*(1-g)*Math.pow(g,2)*(c+d)+Math.pow(g,3)}},snabbtjs.cubic_easing=function(a,b){var c=a/b;return(Math.pow(2*c-1,3)+1)/2},snabbtjs.cos_wooble_easing=function(a,b){var c=a/b;return c*Math.cos(4*Math.PI*c)},snabbtjs.atan_easing=function(a,b){var c=a/b;return(Math.atan(Math.PI*c-Math.PI/2)+1)/2},snabbtjs.sinc_wobbler_easing=function(a,b){var c=a/b,d=5;return(-Math.sin(d*Math.PI*c)/(d*c)+Math.PI)/Math.PI},snabbtjs.sinc2=function(a,b){var c=a/b;return 1-Math.sin(20*Math.PI*c)/(20*Math.PI*c)},snabbtjs.EASING_FUNCS={linear:snabbtjs.linear_easing,cubic:snabbtjs.cubic_easing,atan:snabbtjs.atan_easing,cos:snabbtjs.cos_easing,sinc_wobbler:snabbtjs.sinc_wobbler_easing,sinc2_wobbler:snabbtjs.sinc2,c2:snabbtjs.create_cubic_bezier_easing(.78,.205,.1,1)};var tick_requests=[];window.requestAnimationFrame(master_tick);var snabbtjs=snabbtjs||{};snabbtjs.Matrix=function(a){this.m=a},snabbtjs.mult_matrices=function(a,b,c){return c.m[0][0]=a.m[0][0]*b.m[0][0]+a.m[0][1]*b.m[1][0]+a.m[0][2]*b.m[2][0]+a.m[0][3]*b.m[3][0],c.m[0][1]=a.m[0][0]*b.m[0][1]+a.m[0][1]*b.m[1][1]+a.m[0][2]*b.m[2][1]+a.m[0][3]*b.m[3][1],c.m[0][2]=a.m[0][0]*b.m[0][2]+a.m[0][1]*b.m[1][2]+a.m[0][2]*b.m[2][2]+a.m[0][3]*b.m[3][2],c.m[0][3]=a.m[0][0]*b.m[0][3]+a.m[0][1]*b.m[1][3]+a.m[0][2]*b.m[2][3]+a.m[0][3]*b.m[3][3],c.m[1][0]=a.m[1][0]*b.m[0][0]+a.m[1][1]*b.m[1][0]+a.m[1][2]*b.m[2][0]+a.m[1][3]*b.m[3][0],c.m[1][1]=a.m[1][0]*b.m[0][1]+a.m[1][1]*b.m[1][1]+a.m[1][2]*b.m[2][1]+a.m[1][3]*b.m[3][1],c.m[1][2]=a.m[1][0]*b.m[0][2]+a.m[1][1]*b.m[1][2]+a.m[1][2]*b.m[2][2]+a.m[1][3]*b.m[3][2],c.m[1][3]=a.m[1][0]*b.m[0][3]+a.m[1][1]*b.m[1][3]+a.m[1][2]*b.m[2][3]+a.m[1][3]*b.m[3][3],c.m[2][0]=a.m[2][0]*b.m[0][0]+a.m[2][1]*b.m[1][0]+a.m[2][2]*b.m[2][0]+a.m[2][3]*b.m[3][0],c.m[2][1]=a.m[2][0]*b.m[0][1]+a.m[2][1]*b.m[1][1]+a.m[2][2]*b.m[2][1]+a.m[2][3]*b.m[3][1],c.m[2][2]=a.m[2][0]*b.m[0][2]+a.m[2][1]*b.m[1][2]+a.m[2][2]*b.m[2][2]+a.m[2][3]*b.m[3][2],c.m[2][3]=a.m[2][0]*b.m[0][3]+a.m[2][1]*b.m[1][3]+a.m[2][2]*b.m[2][3]+a.m[2][3]*b.m[3][3],c.m[3][0]=a.m[3][0]*b.m[0][0]+a.m[3][1]*b.m[1][0]+a.m[3][2]*b.m[2][0]+a.m[3][3]*b.m[3][0],c.m[3][1]=a.m[3][0]*b.m[0][1]+a.m[3][1]*b.m[1][1]+a.m[3][2]*b.m[2][1]+a.m[3][3]*b.m[3][1],c.m[3][2]=a.m[3][0]*b.m[0][2]+a.m[3][1]*b.m[1][2]+a.m[3][2]*b.m[2][2]+a.m[3][3]*b.m[3][2],c.m[3][3]=a.m[3][0]*b.m[0][3]+a.m[3][1]*b.m[1][3]+a.m[3][2]*b.m[2][3]+a.m[3][3]*b.m[3][3],c},snabbtjs.mat_to_css=function(a){var b="matrix3d("+a[0][0].toFixed(10)+", "+a[0][1].toFixed(10)+", "+a[0][2].toFixed(10)+", "+a[0][3].toFixed(10)+", "+a[1][0].toFixed(10)+", "+a[1][1].toFixed(10)+", "+a[1][2].toFixed(10)+", "+a[1][3].toFixed(10)+", "+a[2][0].toFixed(10)+", "+a[2][1].toFixed(10)+", "+a[2][2].toFixed(10)+", "+a[2][3].toFixed(10)+", "+a[3][0].toFixed(10)+", "+a[3][1].toFixed(10)+", "+a[3][2].toFixed(10)+", "+a[3][3].toFixed(10)+")";return b},snabbtjs.assign_rotX=function(a,b){return a.m[0][0]=1,a.m[0][1]=0,a.m[0][2]=0,a.m[0][3]=0,a.m[1][0]=0,a.m[1][1]=Math.cos(b),a.m[1][2]=-Math.sin(b),a.m[1][3]=0,a.m[2][0]=0,a.m[2][1]=Math.sin(b),a.m[2][2]=Math.cos(b),a.m[2][3]=0,a.m[3][0]=0,a.m[3][1]=0,a.m[3][2]=0,a.m[3][3]=1,a},snabbtjs.assign_rotY=function(a,b){return a.m[0][0]=Math.cos(b),a.m[0][1]=0,a.m[0][2]=Math.sin(b),a.m[0][3]=0,a.m[1][0]=0,a.m[1][1]=1,a.m[1][2]=0,a.m[1][3]=0,a.m[2][0]=-Math.sin(b),a.m[2][1]=0,a.m[2][2]=Math.cos(b),a.m[2][3]=0,a.m[3][0]=0,a.m[3][1]=0,a.m[3][2]=0,a.m[3][3]=1,a},snabbtjs.assign_rotZ=function(a,b){return a.m[0][0]=Math.cos(b),a.m[0][1]=-Math.sin(b),a.m[0][2]=0,a.m[0][3]=0,a.m[1][0]=Math.sin(b),a.m[1][1]=Math.cos(b),a.m[1][2]=0,a.m[1][3]=0,a.m[2][0]=0,a.m[2][1]=0,a.m[2][2]=1,a.m[2][3]=0,a.m[3][0]=0,a.m[3][1]=0,a.m[3][2]=0,a.m[3][3]=1,a},snabbtjs.assign_trans=function(a,b,c,d){return a.m[0][0]=1,a.m[0][1]=0,a.m[0][2]=0,a.m[0][3]=0,a.m[1][0]=0,a.m[1][1]=1,a.m[1][2]=0,a.m[1][3]=0,a.m[2][0]=0,a.m[2][1]=0,a.m[2][2]=1,a.m[2][3]=0,a.m[3][0]=b,a.m[3][1]=c,a.m[3][2]=d,a.m[3][3]=1,a},snabbtjs.scale=function(a,b,c){return new snabbtjs.Matrix([[a,0,0,0],[0,b,0,0],[0,0,c,0],[0,0,0,1]])},snabbtjs.ident=function(){return new snabbtjs.Matrix([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]])},snabbtjs.assign_ident=function(a){return a.m[0][0]=1,a.m[0][1]=0,a.m[0][2]=0,a.m[0][3]=0,a.m[1][0]=0,a.m[1][1]=1,a.m[1][2]=0,a.m[1][3]=0,a.m[2][0]=0,a.m[2][1]=0,a.m[2][2]=1,a.m[2][3]=0,a.m[3][0]=0,a.m[3][1]=0,a.m[3][2]=0,a.m[3][3]=1,a},snabbtjs.set_css_transform=function(a,b){if(a instanceof Array)for(var c=0;c<a.length;++c)a[c].style.webkitTransform=mat_to_css(b),a[c].style.transform=mat_to_css(b);else a.style.webkitTransform=snabbtjs.mat_to_css(b),a.style.transform=snabbtjs.mat_to_css(b)},snabbtjs.Position=function(a){this.ax=a.ax||0,this.ay=a.ay||0,this.az=a.az||0,this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.bx=a.bx||0,this.by=a.by||0,this.bz=a.bz||0,this.offset_x=a.offset_x||0,this.offset_y=a.offset_y||0,this.offset_z=a.offset_z||0},snabbtjs.Position.prototype.clone=function(){var a=new snabbtjs.Position({ax:this.ax,ay:this.ay,az:this.az,x:this.x,y:this.y,z:this.z,bx:this.bx,by:this.by,bz:this.bz});return a};var temp_m=snabbtjs.ident(),temp_res1=snabbtjs.ident(),temp_res2=snabbtjs.ident();snabbtjs.Position.prototype.as_matrix=function(){return snabbtjs.assign_rotX(temp_m,this.ax),snabbtjs.assign_rotY(temp_res1,this.ay),snabbtjs.mult_matrices(temp_res1,temp_m,temp_res2),snabbtjs.assign_rotZ(temp_m,this.az),snabbtjs.mult_matrices(temp_m,temp_res2,temp_res1),snabbtjs.mult_matrices(temp_res1,snabbtjs.assign_trans(temp_m,this.x,this.y,this.z),temp_res2),snabbtjs.mult_matrices(temp_res2,snabbtjs.assign_rotX(temp_m,this.bx),temp_res1),snabbtjs.mult_matrices(temp_res1,snabbtjs.assign_rotX(temp_m,this.by),temp_res2),snabbtjs.mult_matrices(temp_res2,snabbtjs.assign_rotX(temp_m,this.bz),temp_res1),snabbtjs.mult_matrices(snabbtjs.assign_trans(temp_m,this.offset_x,this.offset_y,this.offset_z),temp_res1,temp_res2),temp_res1.m};